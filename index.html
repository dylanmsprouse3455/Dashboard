<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Tools</title>

<style>
*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  background: #f8fafc;
  color: #0f172a;
  max-width: 420px;
  margin: auto;
  padding: 20px;
}

.hidden { display: none; }

h1, h2 { text-align: center; }

.card {
  background: #fff;
  border-radius: 18px;
  padding: 22px;
  box-shadow: 0 12px 28px rgba(15,23,42,0.08);
  margin-bottom: 20px;
}

button {
  width: 100%;
  padding: 16px;
  margin-top: 14px;
  font-size: 16px;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  background: #3b82f6;
  color: white;
}

button.secondary {
  background: #e2e8f0;
  color: #0f172a;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  margin-top: 10px;
  border-radius: 12px;
  border: 1px solid #cbd5f5;
}

.step { display: none; }
.step.active { display: block; }

.timer {
  font-size: 64px;
  margin-top: 12px;
  text-align: center;
}

.positive { color: #16a34a; }
.negative { color: #dc2626; }
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="card">
  <h1>What do you want to do?</h1>
  <button onclick="showLeave()">ðŸ•’ Leave Time Calculator</button>
  <button class="secondary" onclick="showChore()">âš¡ Chore Speedrun</button>
</div>

<!-- LEAVE TIME -->
<div id="leaveApp" class="hidden">
  <h2>When Do I Need to Start?</h2>
  <div class="card">

    <div class="step active" id="l1">
      <label>Drive time (minutes)</label>
      <input type="number" id="drive">
      <button onclick="lNext(2)">Next</button>
    </div>

    <div class="step" id="l2">
      <label>Arrival time</label>
      <input type="time" id="arrival">
      <button onclick="lNext(3)">Next</button>
    </div>

    <div class="step" id="l3">
      <label>Shower?</label>
      <button onclick="calc(false)">No</button>
      <button class="secondary" onclick="calc(true)">Yes</button>
    </div>

    <div class="step" id="lResult">
      <div id="leaveOutput"></div>
      <button class="secondary" onclick="goHome()">Back</button>
    </div>

  </div>
</div>

<!-- CHORE SPEEDRUN -->
<div id="choreApp" class="hidden">
  <div class="card" onclick="nextChore()">
    <h2 id="taskTitle">START</h2>
    <div class="timer" id="count"></div>
    <div id="choreStats"></div>
    <button class="secondary" onclick="event.stopPropagation(); goHome()">Back</button>
  </div>
</div>

<script>
/* ---------- HELPERS ---------- */
function formatTime(sec) {
  sec = Math.abs(sec);
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  if (m === 0) return `${s}s`;
  if (s === 0) return `${m}m`;
  return `${m}m ${s}s`;
}

/* ---------- NAV ---------- */
function goHome() {
  clearInterval(timer);
  menu.classList.remove("hidden");
  leaveApp.classList.add("hidden");
  choreApp.classList.add("hidden");
  resetChores();
}

function showLeave() {
  menu.classList.add("hidden");
  leaveApp.classList.remove("hidden");
}

function showChore() {
  menu.classList.add("hidden");
  choreApp.classList.remove("hidden");
}

/* ---------- LEAVE CALC ---------- */
function lNext(n) {
  document.querySelectorAll("#leaveApp .step").forEach(s => s.classList.remove("active"));
  document.getElementById("l"+n).classList.add("active");
}

function t2m(t){const[a,b]=t.split(":").map(Number);return a*60+b;}

function m2t(m){
  m=(m+1440)%1440;
  let h=Math.floor(m/60),mm=m%60,ap=h>=12?"PM":"AM";
  h=h%12||12;
  return `${h}:${mm.toString().padStart(2,"0")} ${ap}`;
}

function calc(shower){
  const d=+drive.value,a=arrival.value;
  const prep=shower?50:35;
  const arr=t2m(a),leave=arr-d,start=leave-prep;
  document.querySelectorAll("#leaveApp .step").forEach(s=>s.classList.remove("active"));
  lResult.classList.add("active");
  leaveOutput.innerHTML=
    `Start getting ready by:<br><strong>${m2t(start)}</strong><br><br>
     Leave the house by:<br><strong>${m2t(leave)}</strong><br><br>
     Prep time: ${prep} min<br>
     Drive time: ${d} min`;
}

/* ---------- CHORE SPEEDRUN ---------- */
const chores = [
  { name: "Cans", expected: 30 },
  { name: "Trash", expected: 40 },
  { name: "Clothes", expected: 35 },
  { name: "Shoes", expected: 20 },
  { name: "Dishes", expected: 45 },
  { name: "Dog Toys", expected: 25 }
];

let idx = -1;
let timer = null;
let remaining = 0;
let taskStart = 0;
let totalExpected = 0;
let totalActual = 0;

function resetChores() {
  idx = -1;
  totalExpected = 0;
  totalActual = 0;
  taskTitle.textContent = "START";
  count.textContent = "";
  choreStats.innerHTML = "";
}

function nextChore(){
  if (timer) {
    clearInterval(timer);
    const actual = Math.round((Date.now() - taskStart) / 1000);
    const expected = chores[idx].expected;
    const delta = expected - actual;

    totalExpected += expected;
    totalActual += actual;

    choreStats.innerHTML =
      `Expected: ${formatTime(expected)}<br>
       Actual: ${formatTime(actual)}<br>
       <span class="${delta >= 0 ? "positive" : "negative"}">
       ${delta >= 0 ? "Saved" : "Lost"}: ${formatTime(delta)}
       </span>`;
  }

  idx++;

  if (idx >= chores.length) {
    const net = totalExpected - totalActual;
    taskTitle.textContent = "RUN COMPLETE";
    count.textContent = "";
    choreStats.innerHTML =
      `Expected total: ${formatTime(totalExpected)}<br>
       Actual total: ${formatTime(totalActual)}<br>
       <span class="${net >= 0 ? "positive" : "negative"}">
       Net ${net >= 0 ? "saved" : "lost"}: ${formatTime(net)}
       </span>`;
    return;
  }

  const task = chores[idx];
  taskTitle.textContent = task.name;
  remaining = task.expected;
  count.textContent = formatTime(remaining);
  choreStats.innerHTML = "";
  taskStart = Date.now();

  timer = setInterval(() => {
    remaining--;
    count.textContent = formatTime(remaining);
    if (remaining <= 0) clearInterval(timer);
  }, 1000);
}
</script>

</body>
</html>
